<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>–£—Ç—Ä–µ–Ω–Ω—è—è —Ä—É—Ç–∏–Ω–∞ ‚Äî –ø—Ä–æ—Ç–æ—Ç–∏–ø</title>
  
  <!-- –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –∫—Ä–æ—Å—Å–±—Ä–∞—É–∑–µ—Ä–Ω–æ—Å—Ç—å –∏ —Å–∫—Ä—ã—Ç–∏–µ UI -->
  <meta name="theme-color" content="#1976d2">
  <meta name="description" content="–ü—Ä–æ—Å—Ç–æ–π –ø—Ä–æ—Ç–æ—Ç–∏–ø —É—Ç—Ä–µ–Ω–Ω–µ–π —Ä—É—Ç–∏–Ω—ã">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="mobile-web-app-capable" content="yes">

  <!-- PWA –º–∞–Ω–∏—Ñ–µ—Å—Ç -->
  <link rel="manifest" href="./manifest.json">

  <style>
    * { margin:0; padding:0; box-sizing:border-box; }
    body {
      font-family: system-ui, -apple-system, sans-serif;
      background: #f8f9fa;
      color: #333;
      height: 100vh;
      overflow: hidden;
      display: flex;
      flex-direction: column;
      position: relative;
      touch-action: pan-y;
    }
    header {
      background: #1976d2;
      color: white;
      padding: 16px;
      text-align: center;
      font-weight: 600;
      font-size: 1.2rem;
      z-index: 5;
    }
    .current-task {
      flex: 1;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      padding: 24px;
      text-align: center;
      background: white;
      z-index: 1;
    }
    .current-task h2 {
      font-size: 2rem;
      margin-bottom: 32px;
    }
    .time { font-size: 1.1rem; color: #666; margin-bottom: 24px; }
    .buttons {
      display: flex;
      gap: 16px;
      flex-wrap: wrap;
      justify-content: center;
    }
    button {
      padding: 16px 32px;
      font-size: 1.15rem;
      border: none;
      border-radius: 12px;
      color: white;
      cursor: pointer;
      transition: all 0.2s;
    }
    .btn-confirm { background: #4caf50; }
    .btn-skip    { background: #ff9800; }
    .btn-edit    { background: #2196f3; }
    button:hover { opacity: 0.92; transform: translateY(-2px); }

    .side-drawer {
      position: fixed;
      top: 0; right: 0; bottom: 0;
      width: 100%;
      background: white;
      box-shadow: -6px 0 24px rgba(0,0,0,0.18);
      transform: translateX(100%);
      transition: transform 0.4s ease-out;
      z-index: 10;
      display: flex;
      flex-direction: column;
    }
    .side-drawer.open { transform: translateX(0); }

    .drawer-header {
      padding: 16px;
      font-weight: 600;
      text-align: center;
      border-bottom: 1px solid #eee;
      background: #f8f9fa;
    }
    .task-list {
      padding: 16px;
      overflow-y: auto;
      flex: 1;
      position: relative;
    }
    .task-item {
      padding: 14px 0;
      border-bottom: 1px solid #eee;
      font-size: 1.1rem;
      display: flex;
      align-items: center;
      gap: 12px;
    }
    .task-item:last-child { border-bottom: none; }

    .status-todo    { color: #9e9e9e; }
    .status-current { color: #000; font-weight: 700; background: #f0f8ff; padding: 4px 8px; border-radius: 8px; }
    .status-done    { color: #1976d2; }
    .status-skipped { color: #757575; text-decoration: line-through; }
    .status-edited  { color: #000; }
    .status-edited::before { content: "‚úèÔ∏è "; font-size: 1.2rem; }

    .task-list::after {
      content: "";
      position: absolute;
      bottom: 0; left: 0; right: 0;
      height: 100px;
      background: linear-gradient(to bottom, transparent, white);
      pointer-events: none;
    }

    .overlay {
      position: fixed;
      top: 0; left: 0; right: 0; bottom: 0;
      background: rgba(0,0,0,0.3);
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.4s;
      z-index: 9;
    }
    .overlay.open { opacity: 1; pointer-events: auto; }
  </style>
</head>
<body>

  <header>–£—Ç—Ä–µ–Ω–Ω—è—è —Ä—É—Ç–∏–Ω–∞ ‚Äî 17 —è–Ω–≤–∞—Ä—è 2026</header>

  <div class="current-task">
    <div class="time">–ü—Ä–æ–±—É–∂–¥–µ–Ω–∏–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ –≤ 07:15</div>
    <h2>–ü–æ—Å—Ç–∞–≤–∏—Ç—å –∫–æ—Ñ–µ ‚òï</h2>

    <div class="buttons">
      <button class="btn-confirm" onclick="updateTask(0, 'done')">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å</button>
      <button class="btn-skip"    onclick="updateTask(0, 'skipped')">–û—Ç–∫–ª–æ–Ω–∏—Ç—å</button>
      <button class="btn-edit"    onclick="alert('–ü–µ—Ä–µ–ø–∏—Å–∞—Ç—å –∑–∞–¥–∞—á—É\n(–≤ —ç—Ç–æ–π –≤–µ—Ä—Å–∏–∏ ‚Äî –ø—Ä–æ—Å—Ç–æ –∑–∞–≥–ª—É—à–∫–∞)')">–ü–µ—Ä–µ–ø–∏—Å–∞—Ç—å</button>
    </div>
  </div>

  <div class="side-drawer" id="drawer">
    <div class="drawer-header">–ü–ª–∞–Ω –¥–Ω—è</div>
    <div class="task-list">
      <div class="task-item status-current">1. –ü–æ—Å—Ç–∞–≤–∏—Ç—å –∫–æ—Ñ–µ ‚òï</div>
      <div class="task-item status-todo">2. –ó–∞—Ä—è–¥–∫–∞ 10 –º–∏–Ω üèãÔ∏è‚Äç‚ôÇÔ∏è</div>
      <div class="task-item status-todo">3. –ü—Ä–∏–≥–æ—Ç–æ–≤–∏—Ç—å –∑–∞–≤—Ç—Ä–∞–∫ üç≥</div>
      <div class="task-item status-todo">4. –î—É—à –∏ —Å–±–æ—Ä—ã üöø</div>
      <div class="task-item status-todo">5. –í—ã—Ö–æ–¥ –∏–∑ –¥–æ–º–∞ üè†‚Üíüö∂</div>
    </div>
  </div>

  <div class="overlay" id="overlay" onclick="closeDrawer()"></div>

  <script>
    const drawer = document.getElementById('drawer');
    const overlay = document.getElementById('overlay');
    const tasks = document.querySelectorAll('.task-item');

    function openDrawer() { drawer.classList.add('open'); overlay.classList.add('open'); }
    function closeDrawer() { drawer.classList.remove('open'); overlay.classList.remove('open'); }

    function updateTask(idx, status) {
      tasks[idx].className = 'task-item status-' + status;
      if (status === 'done' && idx + 1 < tasks.length) {
        tasks[idx + 1].classList.add('status-current');
      }
      alert('–°–æ—Å—Ç–æ—è–Ω–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–æ!');
    }

    let touchStartX = 0, touchEndX = 0;

    document.addEventListener('touchstart', e => { touchStartX = e.changedTouches[0].screenX; }, { passive: true });
    document.addEventListener('touchend', e => {
      touchEndX = e.changedTouches[0].screenX;
      const diff = touchEndX - touchStartX;
      if (diff < -60) openDrawer();     // —Å–ø—Ä–∞–≤–∞ ‚Üí –Ω–∞–ª–µ–≤–æ
      else if (diff > 60) closeDrawer(); // —Å–ª–µ–≤–∞ ‚Üí –Ω–∞–ø—Ä–∞–≤–æ
    }, { passive: true });

    // –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è Service Worker
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('./sw.js')
          .then(() => console.log('Service Worker registered'))
          .catch(err => console.log('SW registration failed:', err));
      });
    }
  </script>
</body>
</html>
